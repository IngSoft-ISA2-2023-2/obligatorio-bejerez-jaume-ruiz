<app-user-header title="Employee" link="employee"></app-user-header>
<c-container class="mt-3">
<div *ngIf="!showForm">
  <c-row [ngStyle]="{ width: '100%' }">
    <c-col>
      <c-row class="g-0 customAlign">
        <h3>Modify Product</h3>
        <table 
          *ngIf="products.length > 0"
          cTable
          hover
          [responsive]="true">
          <thead>
            <tr>
              <th scope="col">Name</th>
              <th scope="col">Price</th>
              <th scope="col">Pharmacy</th>
              <th scope="col"></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let product of products">
              <td>{{ product.name }}</td>
              <td>{{ product.price | currency }}</td>
              <td>{{ product.pharmacy.name }}</td>
              <td>
                <button
                  title="Modify"
                  class="btn btn-outline-danger"
                  (click)="showProductForm(product)">
                  <svg cIcon [cIcon]="icons.cilX"></svg>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </c-row>
    </c-col>
  </c-row>
</div>
<div *ngIf="showForm">
    <c-row class="justify-content-center mt-3 mb-3">
        <c-col lg="7" md="9" xl="6">
          <c-card class="mx-4">
            <c-card-body class="p-4">
              <form cForm [formGroup]="form" class="customAlign">
                <h3>Create Product</h3>
                <c-input-group class="mb-3">
                  <span cInputGroupText>
                    <svg cIcon [cIcon]="icons.cilPencil"></svg>
                  </span>
                  <input
                    formControlName="name" 
                    autoComplete="name" 
                    cFormControl 
                    placeholder="Name" />
                </c-input-group>
  
                <c-input-group class="mb-3">
                  <span cInputGroupText>
                    <svg cIcon [cIcon]="icons.cilAlignCenter"></svg>
                  </span>
                  <input 
                    formControlName="description"
                    autoComplete="description" 
                    cFormControl 
                    placeholder="Description" />
                </c-input-group>
  
                <c-input-group class="mb-3">
                  <span cInputGroupText>
                    <svg cIcon [cIcon]="icons.cilDollar"></svg>
                  </span>
                  <input
                    autoComplete="price"
                    cFormControl
                    placeholder="Price"
                    type="input"
                    formControlName="price"
                  />
                </c-input-group>
               
                <div class="d-grid">
                  <button 
                  (click)="modifyProduct()"
                  class="customButton" 
                  cButton 
                  color="primary">
                    Create Product
                  </button>
                </div>
              </form>
            </c-card-body>
          </c-card>
        </c-col>
      </c-row>
  </div>
</c-container>

<c-modal [visible]="visible">
  <c-modal-header
    class="rejectBackground"
  >
    <h5 cModalTitle class="textBackground">{{ modalTitle }}</h5>
    <button (click)="closeModal()" cButtonClose></button>
  </c-modal-header>
  <c-modal-body>{{ modalMessage }}</c-modal-body>
  <c-modal-footer>
    <button (click)="closeModal()" cButton color="secondary">No</button>
    <button
      cButton
      (click)="saveModal($event)"
      color="'danger">
      Yes
    </button>
  </c-modal-footer>
</c-modal>

